============================= test session starts ==============================
platform linux -- Python 3.14.0, pytest-9.0.1, pluggy-1.6.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /home/sheepdestroyer/LAB/whoistel
plugins: anyio-4.11.0
collecting ... collected 6 items

tests/test_whoistel.py::test_geographic_number_lookup PASSED             [ 16%]
tests/test_whoistel.py::test_non_geographic_test_number_lookup PASSED    [ 33%]
tests/test_whoistel.py::test_valid_geo_number_lookup PASSED              [ 50%]
tests/test_whoistel.py::test_invalid_number_format_non_digit FAILED      [ 66%]
tests/test_whoistel.py::test_clean_phone_number PASSED                   [ 83%]
tests/test_whoistel.py::test_operator_info_validation PASSED             [100%]

=================================== FAILURES ===================================
_____________________ test_invalid_number_format_non_digit _____________________

    def test_invalid_number_format_non_digit():
        """Tests handling of an invalidly formatted number."""
        number = "012345678A"
        result = run_whoistel_script(number)
    
        assert result.returncode == 1
>       assert "Erreur: Le numéro doit contenir uniquement des chiffres" in result.stderr
E       assert 'Erreur: Le numéro doit contenir uniquement des chiffres' in ''
E        +  where '' = CompletedProcess(args=['python3', '/home/sheepdestroyer/LAB/whoistel/whoistel.py', '012345678A'], returncode=1, stdout="Numéro : 012345678A\nRésultat : Numéro inconnu dans la base ARCEP (pas d'opérateur assigné trouvé).\nNote : Certains numéros récents ou portés peuvent ne pas figurer dans le fichier public Open Data.\n", stderr='').stderr

tests/test_whoistel.py:70: AssertionError
=========================== short test summary info ============================
FAILED tests/test_whoistel.py::test_invalid_number_format_non_digit - assert ...
========================= 1 failed, 5 passed in 0.24s ==========================
