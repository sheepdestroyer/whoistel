============================= test session starts ==============================
platform linux -- Python 3.14.0, pytest-9.0.1, pluggy-1.6.0
rootdir: /home/sheepdestroyer/LAB/whoistel
plugins: anyio-4.11.0
collected 16 items

tests/test_webapp.py ..........                                          [ 62%]
tests/test_whoistel.py ...F..                                            [100%]

=================================== FAILURES ===================================
_____________________ test_invalid_number_format_non_digit _____________________

    def test_invalid_number_format_non_digit():
        """Tests handling of an invalidly formatted number."""
        number = "012345678A"
        result = run_whoistel_script(number)
    
        assert result.returncode == 1
>       assert "Erreur: Le numéro doit contenir uniquement des chiffres" in result.stderr
E       AssertionError: assert 'Erreur: Le numéro doit contenir uniquement des chiffres' in 'Erreur: Le numéro fourni est invalide. Il doit contenir uniquement des chiffres après nettoyage.\n'
E        +  where 'Erreur: Le numéro fourni est invalide. Il doit contenir uniquement des chiffres après nettoyage.\n' = CompletedProcess(args=['python3', '/home/sheepdestroyer/LAB/whoistel/whoistel.py', '012345678A'], returncode=1, stdout='', stderr='Erreur: Le numéro fourni est invalide. Il doit contenir uniquement des chiffres après nettoyage.\n').stderr

tests/test_whoistel.py:70: AssertionError
=========================== short test summary info ============================
FAILED tests/test_whoistel.py::test_invalid_number_format_non_digit - Asserti...
========================= 1 failed, 15 passed in 0.33s =========================
