============================= test session starts ==============================
platform linux -- Python 3.14.2, pytest-9.0.1, pluggy-1.6.0 -- /usr/bin/python3
cachedir: .pytest_cache
rootdir: /home/sheepdestroyer/LAB/whoistel
plugins: anyio-4.11.0
collecting ... collected 19 items

tests/test_webapp.py::test_index PASSED                                  [  5%]
tests/test_webapp.py::test_check_number_redirect PASSED                  [ 10%]
tests/test_webapp.py::test_check_number_missing_number_validation_error PASSED [ 15%]
tests/test_webapp.py::test_check_number_invalid_number_validation_error PASSED [ 21%]
tests/test_webapp.py::test_view_number_unknown PASSED                    [ 26%]
tests/test_webapp.py::test_report_flow PASSED                            [ 31%]
tests/test_webapp.py::test_check_known_missing_number PASSED             [ 36%]
tests/test_webapp.py::test_view_number_redirect_dirty PASSED             [ 42%]
tests/test_webapp.py::test_report_empty_date PASSED                      [ 47%]
tests/test_webapp.py::test_database_connection_error PASSED              [ 52%]
tests/test_webapp.py::test_report_comment_truncation PASSED              [ 57%]
tests/test_webapp.py::test_csrf_protection PASSED                        [ 63%]
tests/test_webapp.py::test_format_datetime_filter FAILED                 [ 68%]
tests/test_whoistel.py::test_geographic_number_lookup PASSED             [ 73%]
tests/test_whoistel.py::test_non_geographic_test_number_lookup PASSED    [ 78%]
tests/test_whoistel.py::test_valid_geo_number_lookup PASSED              [ 84%]
tests/test_whoistel.py::test_invalid_number_format_non_digit PASSED      [ 89%]
tests/test_whoistel.py::test_clean_phone_number PASSED                   [ 94%]
tests/test_whoistel.py::test_operator_info_validation PASSED             [100%]

=================================== FAILURES ===================================
_________________________ test_format_datetime_filter __________________________

client = <FlaskClient <Flask 'webapp'>>

    def test_format_datetime_filter(client):
        """Test the format_datetime utility function directly."""
        from webapp import format_datetime
        from datetime import datetime
    
        # Test with datetime object
        dt = datetime(2023, 1, 1, 12, 34, 56)
        assert format_datetime(dt) == "01/01/2023 12:34"
    
        # Test with valid strings
        assert format_datetime("2023-01-01 12:34:56") == "01/01/2023 12:34"
>       assert format_datetime("2023-01-01") == "01/01/2023"
E       AssertionError: assert '01/01/2023 00:00' == '01/01/2023'
E         
E         - 01/01/2023
E         + 01/01/2023 00:00
E         ?           ++++++

tests/test_webapp.py:151: AssertionError
---------------------------- Captured stderr setup -----------------------------
Initializing history database schema in /tmp/tmphvuh06b1...
------------------------------ Captured log setup ------------------------------
INFO     history_manager:history_manager.py:32 Initializing history database schema in /tmp/tmphvuh06b1...
=========================== short test summary info ============================
FAILED tests/test_webapp.py::test_format_datetime_filter - AssertionError: as...
========================= 1 failed, 18 passed in 0.32s =========================
